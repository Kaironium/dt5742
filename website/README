BTL Testing Website
===================

This directory contains the files necessary to run a copy of the web server for
collating the BTL module testing results. Data is stored in a postgres database
that is uploaded by the analysis software in the `wavedump` directory of this
repository. The data is then shared using a website run by Flask.

Installation
------------

The server must be running CentOS-8. First, make sure all the available
software is updated:

```console
# dnf update -y
```

Next, we install and enable the postgres server software:

```console
# dnf install postgresql postgresql-server
# postgresql-setup --initdb --unit postgresql
# systemctl start postgresql
# systemctl enable postgresql
```

Now, we need to set up the database:

```console
# install -o postgres btl_qa.sql /var/lib/pgsql
# su postgres
# psql -f btl_qa.sql
```

Next, we install the software necessary to run the webserver:

```console
# dnf install python3-flask python3-gunicorn python3-sqlalchemy python3-psycopg2 python3-pytz nginx
# systemctl start nginx
# systemctl enable nginx
```

Next, create a file in this directory named `settings.txt` with the following
information:

```console
DB_USER = "cms"
DB_HOST = "localhost"
DB_PORT = 5432
DB_NAME = "btl_qa"
DB_PASS = "password"
```

changing `password` to the default cms password for the database.

Change the server_name in the nginx.conf configuration file:

```console
# vim nginx.conf
```

Finally, run:

```console
$ sudo make install
```
